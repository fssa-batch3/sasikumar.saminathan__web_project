<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="../../assets/css/address.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css" integrity="sha512-MV7K8+y+gLIBoVD59lQIYicR65iaqukzvf/nwasF0nqhPay5w/9lJmVM2hMDcnK1OnMGCdVK+iQrJ7lzPJQd1w==" crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>
<body>
    <header> 
        <div class="logo">
        <img src="../../assets/icon/shopping-bag.png" alt="shopping-bag" width="40px" height="40px">
        <h5 class="logo-name"><b>Shopnow</b></h5>
   <div class="tracking">
    <img src="../../assets/icon/icons8-1st-48.png" alt="" width="40px"m height="40px">
    <img src="../../assets/icon/icons8-circled-2-48.png" alt="" width="40px"m height="40px">
   </div>
        
    </div>
</header>
<main>
<form action="payment.html">
    <div class="container">
        <h2 class="head">Add address</h2><hr>
        <div class="phone">
            <img src="../../assets/icon/emergency-call.gif" alt="" width="30px" height="30px">
            <h3>Contact Details</h3>
        </div>
        <div class="address-1">
            <div><input type="text" placeholder="Name" id="name"  required></div>
            <div><input type="number" placeholder="Phone number" id="number"></div>
        </div>
        <div class="location">
            <img src="../../assets/icon/location.gif" alt="" height="40px" width="40px">
            <h3>Address</h3>
        </div>
        <div class="address-2">
           <div> <input type="text" placeholder="House no./buling name" id="house_no"></div>
            <div><input type="text" placeholder="Road name/Area/Colany" id="area"></div>
           <div> <input type="text" placeholder="Pincode"  id="pincode"></div>
            <div><input type="text" placeholder="Nearby location(optional)" id="spd"></div>
        </div>
        <a><button class="but-1" id="deliver" type="button"><b>Deliver here</b></button></a>
</form>
   </div>
</main> 
<script>
      //get valuse from inputs 
      const name1= document.getElementById("name").value
      const number= document.getElementById("number").value  
      const house_no= document.getElementById("house_no").value
      const area= document.getElementById("area").value
      const pincode= document.getElementById("pincode").value
      const spd= document.getElementById("spd").value




    const deliver = document.getElementById("deliver")
    //get the profile for put the user id in object
    const profile = JSON.parse(localStorage.getItem("profile"))


    deliver.addEventListener("click",function(){
      
        //creating new array for add address
        let arr = new Array
        arr = JSON.parse(localStorage.getItem("address")) ? JSON.parse(localStorage.getItem("address")) : []

        //push the values in that object
        arr.push({
            "user_id" : profile["user_id"],
            "name" : name1,
            "phone_number" : number,
            "house_number" : house_no,
            "area" : area,
            "pincode" : pincode,
            "landmark" : spd
        })

        localStorage.setItem("address",JSON.stringify(arr))

    //get url from search bar
    const url = window.location.search;

    const urlParams = new URLSearchParams(url);

    const productname = urlParams.get("id")

    window.location.href = "payment.html?id="+productname


    })

</script>  
    
</body>
</html>