<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shopnow</title>
    <link rel="icon" type = "image/x-icon" href="../../../assets/icon/shopping-bag.png">
    <link rel="stylesheet" href="../../../assets/css/location.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css" integrity="sha512-MV7K8+y+gLIBoVD59lQIYicR65iaqukzvf/nwasF0nqhPay5w/9lJmVM2hMDcnK1OnMGCdVK+iQrJ7lzPJQd1w==" crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>
<body>
    <header> 
        <div class="logo">
        <img src="../../../assets/icon/shopping-bag.png" alt="shop" width="40px" height="40px">
        <a aria-label="shopnow" href="../../../index.html"><h5 class="logo-name"><b>Shopnow</b></h5></a>
    </div>
    <input type="search" placeholder="search " class="search">
    <i class="fa fa-search" aria-hidden="true"></i>
    <ul class="top-list">
        <li><a aria-label="login" href="../../sign-in/login.html"><button class="login"><b>Login</b></button></a></li>
        <li><a aria-label="Seller" href="../../Seller/Seller.html"><p class="seller">Seller</p></a></li>
        <li><a aria-label="cart" href="../../../pages/buyer/cart.html"><i class="home-icon fa fa-shopping-cart" aria-hidden="true"></i></a></li>
        <li><a aria-label="pincode" href="../../../pages/buyer/side flow/pincode.html"><i class="home-icon fa-solid fa-location-dot"></i></a></li>
    </ul>
</header>

<main>
    <div class="contain">
        <h2>Allow access to find your nearby shop for this product</h2>
        <div class="but">
            <i class="fa-solid fa-location-crosshairs"></i>
           <button id="near"><b><p>Nearby me</p></b></button>
        </div>
    </div>
    <img src="../../../assets/image/3WyW.gif" alt="gif" class="gif">
</main>
<script>
    //if click the btn find your lat and long with ip address and find the nearby shops
    const btn = document.getElementById("near")

       
        if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(showPosition);
  } else { 
    alert("Geolocation is not supported by this browser.")
  }


  function showPosition(position) {
    console.log(position);
    let lat1 =  position.coords.latitude
    let lon1 = position.coords.longitude
    console.log(lat1,lon1);
   
    let profile = JSON.parse(localStorage.getItem("profile"))
    profile["lat"] = lat1
    profile["lon"] = lon1
    localStorage.setItem("profile",JSON.stringify(profile))
   }

         //get your nearby shops via latitude and longtitude
//          const options2 = {
// 	method: 'GET',
// 	headers: {
// 		'X-RapidAPI-Key': '1653fc8406msh4c0c78350cb141ep1d5ad3jsn01eef7cce62b',
// 		'X-RapidAPI-Host': 'local-business-data.p.rapidapi.com'
// 	}
// };



// fetch(`https://local-business-data.p.rapidapi.com/search-nearby?query=mobile%20phone%20shop&lat=${latitude}&lng=${longitude}&limit=3&language=en&region=us`, options2)
// 	.then(response => response.json())
//     .then(response => {
//     //console.log(response["data"]);
//    localStorage.setItem("shoper",JSON.stringify(response["data"]))
//   })
// 	.catch(err => console.error(err));



    btn.addEventListener("click",function () {

//get url from search bar
const url = window.location.search;
//console.log(url);
const urlParams = new URLSearchParams(url);
//console.log(urlParams);
const product_id = urlParams.get("user_id")
    
window.location.href = "product-detail.html?user_id="+product_id

    })



    
</script>    
</body>
</html>